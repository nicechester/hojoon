<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RhythmShare Appraiser Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f4f8;
            color: #334155;
        }
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }
        .text-primary { color: #4ECDC4; }
        .bg-primary { background-color: #4ECDC4; }
        .text-secondary { color: #FF6B6B; }
        .bg-secondary { background-color: #FF6B6B; }
        .card {
            border-radius: 1.5rem;
        }
        .table-container {
            overflow-x: auto;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md p-4 flex items-center justify-between sticky top-0 z-50">
        <div class="flex items-center space-x-2">
            <i class="fas fa-hand-holding-usd text-2xl text-primary"></i>
            <h1 class="text-xl md:text-2xl font-poppins font-semibold">Appraiser Dashboard</h1>
        </div>
        <div class="flex items-center space-x-4">
            <span class="text-sm md:text-base font-roboto text-gray-600 hidden md:block">Welcome, Appraiser</span>
            <button class="bg-secondary text-white font-semibold py-2 px-4 rounded-full shadow-lg hover:bg-red-500 transition-colors">
                <i class="fas fa-sign-out-alt"></i>
                <span class="ml-2 hidden md:inline">Logout</span>
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-1 p-4 md:p-8">
        <div class="bg-white card shadow-lg p-6 md:p-8">

            <!-- Tab Content -->
            <div id="tab-content">
                
                <!-- Pending Appraisals Tab -->
                <div id="pending-tab" class="tab-pane">
                    <h2 class="text-2xl font-poppins font-semibold mb-6">Pending Appraisals</h2>
                    <div class="table-container">
                        <table class="min-w-full bg-white rounded-lg shadow-md overflow-hidden" id="appraisals-table">
                            <thead class="bg-gray-100 border-b-2 border-gray-200">
                                <tr>
                                    <th class="p-4 text-left text-sm font-semibold">Instrument</th>
                                    <th class="p-4 text-left text-sm font-semibold hidden md:table-cell">Lister</th>
                                    <th class="p-4 text-left text-sm font-semibold">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Appraisal items will be dynamically injected here by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Appraisal Detail Tab (New Page) -->
                <div id="detail-tab" class="tab-pane hidden">
                    <div class="flex items-center mb-6">
                        <button onclick="showPendingTab()" class="text-gray-500 hover:text-gray-700 transition-colors mr-4">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="text-2xl font-poppins font-semibold" id="instrument-name">Instrument Name</h2>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Instrument Details Card -->
                        <div class="bg-white card shadow-md p-6">
                            <h3 class="text-xl font-poppins font-semibold mb-4">Instrument Details</h3>
                            <p><strong>Lister:</strong> <span id="instrument-lister"></span></p>
                            <p><strong>Condition:</strong> <span id="instrument-condition"></span></p>
                            <p class="mt-4">
                                <strong>Description:</strong>
                                <span id="instrument-description" class="block mt-1 text-gray-600"></span>
                            </p>
                        </div>

                        <!-- Appraisal Card -->
                        <div class="bg-white card shadow-md p-6 flex flex-col justify-between">
                            <div>
                                <h3 class="text-xl font-poppins font-semibold mb-4">Submit Appraisal</h3>
                                <div class="mb-4">
                                    <label for="appraisal-value" class="block text-sm font-medium text-gray-700 mb-1">Appraised Value ($)</label>
                                    <input type="number" id="appraisal-value" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="e.g., 2500.00">
                                </div>
                            </div>
                            <div class="flex space-x-4 mt-auto">
                                <button onclick="submitAppraisal()" class="flex-1 bg-primary text-white py-2 px-4 rounded-full text-sm font-semibold hover:bg-teal-500 transition-colors">
                                    Submit
                                </button>
                                <button onclick="rejectAppraisal()" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-full text-sm font-semibold hover:bg-gray-400 transition-colors">
                                    Reject
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Message Box for alerts -->
                <div id="message-box" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden bg-white card p-8 shadow-2xl border-2 border-primary z-[100] text-center max-w-sm">
                    <div id="message-content"></div>
                    <button id="message-ok-button" class="mt-4 bg-primary text-white py-2 px-4 rounded-full hover:bg-teal-500 transition-colors font-semibold">OK</button>
                </div>
                <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50"></div>
            </div>
        </div>
    </main>
    
    <script>
        const mockAppraisals = [
            {
                id: 'appraisal1',
                instrument: 'Vintage Fender Stratocaster',
                lister: 'John Doe',
                condition: 'Excellent',
                description: 'A beautiful 1970s Fender Stratocaster. Looks and plays great, minimal fret wear. All original parts.',
                status: 'pending'
            },
            {
                id: 'appraisal2',
                instrument: 'Yamaha C2 Grand Piano',
                lister: 'Jane Smith',
                condition: 'Good',
                description: 'A well-maintained concert grand piano. Some cosmetic scratches, but the sound is pristine. Needs a minor tune-up.',
                status: 'pending'
            },
            {
                id: 'appraisal3',
                instrument: 'Moog Synthesizer',
                lister: 'Sam Green',
                condition: 'Fair',
                description: 'Classic Moog. Has some noisy potentiometers that need to be cleaned, but otherwise fully functional. Includes original case.',
                status: 'pending'
            },
            {
                id: 'appraisal4',
                instrument: 'Acoustic Upright Bass',
                lister: 'Peter Jones',
                condition: 'Good',
                description: 'A double bass in good condition. The neck is straight and the action is good, but the finish is worn.',
                status: 'pending'
            }
        ];

        let currentAppraisalId = null;

        function showMessage(message, type) {
            const msgBox = document.getElementById('message-box');
            const overlay = document.getElementById('overlay');
            document.getElementById('message-content').innerText = message;
            msgBox.classList.remove('hidden');
            overlay.classList.remove('hidden');
        }

        document.getElementById('message-ok-button').addEventListener('click', () => {
            document.getElementById('message-box').classList.add('hidden');
            document.getElementById('overlay').classList.add('hidden');
        });

        // Function to show a specific tab
        function showTab(tabName) {
            document.querySelectorAll('.tab-pane').forEach(pane => {
                if (pane.id === `${tabName}-tab`) {
                    pane.classList.remove('hidden');
                } else {
                    pane.classList.add('hidden');
                }
            });
        }

        // Function to render the table of pending appraisals
        function renderAppraisalTable() {
            const tableBody = document.querySelector('#appraisals-table tbody');
            tableBody.innerHTML = '';
            const pendingAppraisals = mockAppraisals.filter(a => a.status === 'pending');
            
            if (pendingAppraisals.length === 0) {
                tableBody.innerHTML = `
                    <tr class="border-b border-gray-100">
                        <td colspan="3" class="p-4 text-center text-gray-500">
                            No pending appraisals at this time.
                        </td>
                    </tr>
                `;
            } else {
                pendingAppraisals.forEach(appraisal => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-100 hover:bg-gray-50 transition-colors';
                    row.innerHTML = `
                        <td class="p-4 text-sm font-medium">${appraisal.instrument}</td>
                        <td class="p-4 text-sm hidden md:table-cell">${appraisal.lister}</td>
                        <td class="p-4 text-sm space-x-2">
                            <button onclick="showAppraisalDetail('${appraisal.id}')" class="bg-primary text-white py-1 px-3 rounded-full text-xs font-semibold hover:bg-teal-500 transition-colors">Appraise</button>
                            <button onclick="rejectAppraisal('${appraisal.id}')" class="bg-gray-200 text-gray-700 py-1 px-3 rounded-full text-xs font-semibold hover:bg-gray-300 transition-colors">Reject</button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            }
        }
        
        // Function to populate and show the appraisal detail page
        window.showAppraisalDetail = function(appraisalId) {
            const appraisal = mockAppraisals.find(a => a.id === appraisalId);
            if (!appraisal) {
                showMessage("Appraisal not found.", "error");
                return;
            }
            
            currentAppraisalId = appraisalId;

            document.getElementById('instrument-name').innerText = appraisal.instrument;
            document.getElementById('instrument-lister').innerText = appraisal.lister;
            document.getElementById('instrument-condition').innerText = appraisal.condition;
            document.getElementById('instrument-description').innerText = appraisal.description;
            
            showTab('detail');
        };

        // Function to go back to the pending appraisals list
        window.showPendingTab = function() {
            showTab('pending');
        };

        // Function to handle the appraisal submission
        window.submitAppraisal = function() {
            const appraisal = mockAppraisals.find(a => a.id === currentAppraisalId);
            const value = document.getElementById('appraisal-value').value;
            
            if (!value || isNaN(value) || value <= 0) {
                showMessage("Please enter a valid appraisal value.", "error");
                return;
            }

            appraisal.appraisedValue = parseFloat(value);
            appraisal.status = 'completed';
            
            showMessage(`Appraisal for "${appraisal.instrument}" submitted successfully!`, "success");
            showPendingTab();
            renderAppraisalTable();
        };

        // Function to handle rejecting an appraisal
        window.rejectAppraisal = function(appraisalId) {
            const appraisal = mockAppraisals.find(a => a.id === appraisalId);
            appraisal.status = 'rejected';
            
            showMessage(`Appraisal for "${appraisal.instrument}" has been rejected.`, "info");
            renderAppraisalTable();
        };

        // Show the default tab on page load
        document.addEventListener('DOMContentLoaded', () => {
            renderAppraisalTable();
            showTab('pending');
        });
    </script>
</body>
</html>

